{"dependencies":[{"name":"C:\\Users\\Ahmed\\Desktop\\Natours\\package.json","includedInParent":true,"mtime":1685934625119},{"name":"axios","loc":{"line":1,"column":18}},{"name":"./alerts","loc":{"line":2,"column":26}}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateSettings = undefined;\nvar _this = undefined;\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _alerts = require('./alerts');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n// type is either password or data\nvar updateSettings = exports.updateSettings = function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(data, type) {\n    var url, res;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            url = type === 'password' ? 'http://127.0.0.1:3000/api/v1/users/updateMyPassword' : 'http://127.0.0.1:3000/api/v1/users/updateMe';\n            _context.next = 4;\n            return (0, _axios2.default)({\n              method: 'PATCH',\n              url: url,\n              data: data\n            });\n\n          case 4:\n            res = _context.sent;\n\n            // res from controller\n            if (res.data.status === 'success') {\n              (0, _alerts.showAlert)('success', type.toUpperCase() + ' updated successfully');\n              window.setTimeout(function () {\n                location.reload();\n              }, 1000);\n            }\n            console.log(res);\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context['catch'](0);\n\n            (0, _alerts.showAlert)('error', _context.t0.response.data.message);\n\n          case 12:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, _this, [[0, 9]]);\n  }));\n\n  return function updateSettings(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/*\r\n\r\n\r\nThe user submits the form on the client-side, triggering the submit event listener.\r\nInside the event listener, the updateData function is called with the name and email values from the form inputs.\r\nThe updateData function makes an API request using Axios to the\r\nendpoint http://127.0.0.1:3000/api/v1/users/updateMe with the provided name and email data.\r\nIf the API request is successful (res.data.status === 'success'),\r\nthe showAlert function is called to display a success message to the user.\r\nThe updated user data is then rendered in the account view template using the view controller\r\n(exports.updateUserData) with the updatedUser object obtained from the API response.\r\nThe rendered account view is sent as the response to the client.\r\nSo, the view controller is responsible for rendering the account view template with the updated user data\r\n after the API request is successfully completed using Axios.\r\n */","map":{"mappings":[{"generated":{"line":9,"column":0},"source":"updateSettings.js","original":{"line":1,"column":0}},{"generated":{"line":13,"column":0},"source":"updateSettings.js","original":{"line":2,"column":0}},{"generated":{"line":19,"column":0},"source":"updateSettings.js","original":{"line":5,"column":0}},{"generated":{"line":20,"column":0},"source":"updateSettings.js","original":{"line":6,"column":7}},{"name":"updateSettings","generated":{"line":20,"column":4},"source":"updateSettings.js","original":{"line":6,"column":13}},{"generated":{"line":21,"column":0},"source":"updateSettings.js","original":{"line":6,"column":13}},{"generated":{"line":21,"column":69},"source":"updateSettings.js","original":{"line":6,"column":30}},{"name":"data","generated":{"line":21,"column":86},"source":"updateSettings.js","original":{"line":6,"column":37}},{"generated":{"line":21,"column":90},"source":"updateSettings.js","original":{"line":6,"column":30}},{"name":"type","generated":{"line":21,"column":92},"source":"updateSettings.js","original":{"line":6,"column":44}},{"generated":{"line":21,"column":96},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":22,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":23,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":24,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":25,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":26,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":27,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"name":"url","generated":{"line":28,"column":0},"source":"updateSettings.js","original":{"line":8,"column":10}},{"generated":{"line":28,"column":15},"source":"updateSettings.js","original":{"line":6,"column":30}},{"name":"type","generated":{"line":28,"column":18},"source":"updateSettings.js","original":{"line":8,"column":16}},{"generated":{"line":28,"column":27},"source":"updateSettings.js","original":{"line":8,"column":25}},{"generated":{"line":28,"column":37},"source":"updateSettings.js","original":{"line":8,"column":16}},{"generated":{"line":28,"column":40},"source":"updateSettings.js","original":{"line":8,"column":38}},{"generated":{"line":28,"column":93},"source":"updateSettings.js","original":{"line":8,"column":16}},{"generated":{"line":28,"column":96},"source":"updateSettings.js","original":{"line":8,"column":93}},{"generated":{"line":28,"column":141},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":29,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":30,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":30,"column":19},"source":"updateSettings.js","original":{"line":9,"column":22}},{"generated":{"line":30,"column":40},"source":"updateSettings.js","original":{"line":9,"column":28}},{"name":"method","generated":{"line":31,"column":0},"source":"updateSettings.js","original":{"line":10,"column":6}},{"generated":{"line":31,"column":22},"source":"updateSettings.js","original":{"line":10,"column":14}},{"generated":{"line":31,"column":29},"source":"updateSettings.js","original":{"line":9,"column":28}},{"name":"url","generated":{"line":32,"column":0},"source":"updateSettings.js","original":{"line":11,"column":6}},{"generated":{"line":32,"column":22},"source":"updateSettings.js","original":{"line":9,"column":28}},{"name":"data","generated":{"line":33,"column":0},"source":"updateSettings.js","original":{"line":12,"column":6}},{"generated":{"line":34,"column":0},"source":"updateSettings.js","original":{"line":9,"column":28}},{"generated":{"line":34,"column":13},"source":"updateSettings.js","original":{"line":9,"column":22}},{"generated":{"line":34,"column":14},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":36,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"name":"res","generated":{"line":37,"column":0},"source":"updateSettings.js","original":{"line":9,"column":10}},{"generated":{"line":37,"column":15},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":39,"column":0},"source":"updateSettings.js","original":{"line":14,"column":4}},{"generated":{"line":40,"column":0},"source":"updateSettings.js","original":{"line":15,"column":4}},{"name":"res","generated":{"line":40,"column":16},"source":"updateSettings.js","original":{"line":15,"column":8}},{"name":"data","generated":{"line":40,"column":20},"source":"updateSettings.js","original":{"line":15,"column":12}},{"generated":{"line":40,"column":24},"source":"updateSettings.js","original":{"line":15,"column":8}},{"name":"status","generated":{"line":40,"column":25},"source":"updateSettings.js","original":{"line":15,"column":17}},{"generated":{"line":40,"column":31},"source":"updateSettings.js","original":{"line":15,"column":8}},{"generated":{"line":40,"column":36},"source":"updateSettings.js","original":{"line":15,"column":28}},{"generated":{"line":40,"column":45},"source":"updateSettings.js","original":{"line":15,"column":4}},{"generated":{"line":40,"column":47},"source":"updateSettings.js","original":{"line":15,"column":38}},{"generated":{"line":41,"column":0},"source":"updateSettings.js","original":{"line":16,"column":6}},{"generated":{"line":41,"column":37},"source":"updateSettings.js","original":{"line":16,"column":16}},{"generated":{"line":41,"column":46},"source":"updateSettings.js","original":{"line":16,"column":6}},{"name":"type","generated":{"line":41,"column":48},"source":"updateSettings.js","original":{"line":16,"column":30}},{"name":"toUpperCase","generated":{"line":41,"column":53},"source":"updateSettings.js","original":{"line":16,"column":35}},{"generated":{"line":41,"column":64},"source":"updateSettings.js","original":{"line":16,"column":30}},{"generated":{"line":41,"column":66},"source":"updateSettings.js","original":{"line":16,"column":6}},{"name":"window","generated":{"line":42,"column":0},"source":"updateSettings.js","original":{"line":17,"column":6}},{"name":"setTimeout","generated":{"line":42,"column":21},"source":"updateSettings.js","original":{"line":17,"column":13}},{"generated":{"line":42,"column":31},"source":"updateSettings.js","original":{"line":17,"column":6}},{"generated":{"line":42,"column":32},"source":"updateSettings.js","original":{"line":17,"column":24}},{"generated":{"line":42,"column":44},"source":"updateSettings.js","original":{"line":17,"column":29}},{"name":"location","generated":{"line":43,"column":0},"source":"updateSettings.js","original":{"line":18,"column":8}},{"name":"reload","generated":{"line":43,"column":25},"source":"updateSettings.js","original":{"line":18,"column":17}},{"generated":{"line":43,"column":31},"source":"updateSettings.js","original":{"line":18,"column":8}},{"generated":{"line":44,"column":0},"source":"updateSettings.js","original":{"line":19,"column":7}},{"generated":{"line":44,"column":15},"source":"updateSettings.js","original":{"line":17,"column":6}},{"generated":{"line":44,"column":17},"source":"updateSettings.js","original":{"line":19,"column":10}},{"generated":{"line":44,"column":21},"source":"updateSettings.js","original":{"line":17,"column":6}},{"generated":{"line":45,"column":0},"source":"updateSettings.js","original":{"line":20,"column":5}},{"name":"console","generated":{"line":46,"column":0},"source":"updateSettings.js","original":{"line":21,"column":4}},{"name":"log","generated":{"line":46,"column":20},"source":"updateSettings.js","original":{"line":21,"column":12}},{"generated":{"line":46,"column":23},"source":"updateSettings.js","original":{"line":21,"column":4}},{"name":"res","generated":{"line":46,"column":24},"source":"updateSettings.js","original":{"line":21,"column":16}},{"generated":{"line":46,"column":27},"source":"updateSettings.js","original":{"line":21,"column":4}},{"generated":{"line":47,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":48,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":50,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":51,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":52,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":54,"column":0},"source":"updateSettings.js","original":{"line":23,"column":4}},{"generated":{"line":54,"column":35},"source":"updateSettings.js","original":{"line":23,"column":14}},{"generated":{"line":54,"column":42},"source":"updateSettings.js","original":{"line":23,"column":4}},{"generated":{"line":54,"column":44},"source":"updateSettings.js","original":{"line":23,"column":22}},{"name":"response","generated":{"line":54,"column":56},"source":"updateSettings.js","original":{"line":23,"column":26}},{"generated":{"line":54,"column":64},"source":"updateSettings.js","original":{"line":23,"column":22}},{"name":"data","generated":{"line":54,"column":65},"source":"updateSettings.js","original":{"line":23,"column":35}},{"generated":{"line":54,"column":69},"source":"updateSettings.js","original":{"line":23,"column":22}},{"name":"message","generated":{"line":54,"column":70},"source":"updateSettings.js","original":{"line":23,"column":40}},{"generated":{"line":54,"column":77},"source":"updateSettings.js","original":{"line":23,"column":4}},{"generated":{"line":56,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":57,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":58,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":59,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":60,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":61,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":62,"column":0},"source":"updateSettings.js","original":{"line":6,"column":30}},{"generated":{"line":62,"column":3},"source":"updateSettings.js","original":{"line":6,"column":13}},{"generated":{"line":64,"column":0},"source":"updateSettings.js","original":{"line":6,"column":13}},{"generated":{"line":65,"column":0},"source":"updateSettings.js","original":{"line":6,"column":13}},{"generated":{"line":66,"column":0},"source":"updateSettings.js","original":{"line":6,"column":13}},{"generated":{"line":67,"column":0},"source":"updateSettings.js","original":{"line":6,"column":13}},{"generated":{"line":67,"column":3},"source":"updateSettings.js","original":{"line":6,"column":7}},{"generated":{"line":69,"column":0},"source":"updateSettings.js","original":{"line":29,"column":0}}],"sources":{"updateSettings.js":"import axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\n\r\n// type is either password or data\r\nexport const updateSettings = async (data , type) => {\r\n  try {\r\n    const url = type === 'password' ? 'http://127.0.0.1:3000/api/v1/users/updateMyPassword' :'http://127.0.0.1:3000/api/v1/users/updateMe';\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url,\r\n      data\r\n    });\r\n    // res from controller\r\n    if (res.data.status === 'success'){\r\n      showAlert('success', `${type.toUpperCase()} updated successfully`);\r\n      window.setTimeout(() =>{\r\n        location.reload();\r\n      } , 1000);\r\n    }\r\n    console.log(res);\r\n  } catch (err) {\r\n    showAlert('error',err.response.data.message);\r\n  }\r\n};\r\n\r\n\r\n\r\n/*\r\n\r\n\r\nThe user submits the form on the client-side, triggering the submit event listener.\r\nInside the event listener, the updateData function is called with the name and email values from the form inputs.\r\nThe updateData function makes an API request using Axios to the\r\nendpoint http://127.0.0.1:3000/api/v1/users/updateMe with the provided name and email data.\r\nIf the API request is successful (res.data.status === 'success'),\r\nthe showAlert function is called to display a success message to the user.\r\nThe updated user data is then rendered in the account view template using the view controller\r\n(exports.updateUserData) with the updatedUser object obtained from the API response.\r\nThe rendered account view is sent as the response to the client.\r\nSo, the view controller is responsible for rendering the account view template with the updated user data\r\n after the API request is successfully completed using Axios.\r\n */"},"lineCount":null}},"hash":"b90e18f1348f8a385396caa9272de1f4","cacheData":{"env":{}}}